<html>
    <head>
        <title>Sandbox - MarketWatch</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Lora:400,700|Muli:400,700,800|Source+Sans+Pro:400,600,700|Lato:400,700" rel="stylesheet" type="text/css">
        <link href="https://mw4.wsj.net/mw5/content/images/favicons/apple-touch-icon.png" rel="apple-touch-icon"/>
        <link href="https://mw4.wsj.net/mw5/content/images/favicons/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"/>
        <link href="https://mw4.wsj.net/mw5/content/images/favicons/apple-touch-icon-167x167.png" rel="apple-touch-icon" sizes="167x167"/>
        <link href="https://mw4.wsj.net/mw5/content/images/favicons/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"/>
        <link href="https://mw4.wsj.net/mw5/content/logos/favicon.ico" rel="shortcut icon"/>
        <meta charset="utf-8" />
        <meta name="page.site" content="marketwatch" />
        <meta name="theme-color" content="#2e2e2f" />
        <meta name="apple-itunes-app" content="app-id=336693422" />
        <meta property="fb:app_id" content="283204329838" />
        <meta property="og:site_name" content="MarketWatch" />
        <meta name="twitter:site:id" content="624413" />
        <meta name="twitter:domain" content="marketwatch.com" />
        <meta name="description" content="Sandbox - Top stories from MarketWatch." />
        <meta property="og:description" content="Sandbox - Top stories from MarketWatch." />
        <meta name="twitter:description" content="Sandbox - Top stories from MarketWatch." />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://vert-gerard-57621.herokuapp.com/index.html" />
        <meta property="og:title" content="Sandbox - MarketWatch" />
        <meta property="og:image" content="https://mw3.wsj.net/mw5/content/logos/mw_logo_social.png" />
        <meta name="twitter:domain" content="marketwatch.com" />
        <meta name="twitter:image" content="https://mw3.wsj.net/mw5/content/logos/mw_logo_social.png" />
        <meta name="twitter:image:width" content="1200" />
        <meta name="twitter:image:height" content="600" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:creator" content="@MarketWatch" />
        <link rel="stylesheet" type="text/css" href="css/style.css"> 
    </head>
    <body>
        <div id="loading">
            <div id="loading-spinner">
                <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
            </div>
        </div>
        <div class="container">
            <div id="header">
                <div class="header-row">
                    <div id="logo">
                        <a href="https://www.marketwatch.com/" data-track-code="MW_Masthead_Logo">
                            <!--?xml version="1.0" encoding="utf-8"?-->
                            <!-- Generator: Adobe Illustrator 19.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 697.5 99.8" style="enable-background:new 0 0 697.5 99.8;" xml:space="preserve">
                            <style type="text/css">
                                .st0{fill:#ffffff;}
                                .st1{fill:#00AC4E;}
                            </style>
                            <g>
                                <g>
                                    <path class="st0" d="M168.9,41.8l-1.2,5.9h-0.3c-1.5-3.3-5.7-7.9-15-7.9c-15,0-30.3,11.6-33.7,29.9c-2.9,16,4.8,30.1,22.6,30.1
                                        c6.5,0,14-2.5,17.9-8h0.3l-1.1,6H175l10.4-56H168.9z M163.5,69.7c-1.1,5.5-6.3,14.4-16.7,14.4c-10.2,0-12.3-9-11.4-14.2
                                        c1.2-6.4,6.9-14.4,16.6-14.4C161.5,55.6,164.7,63.1,163.5,69.7z"></path>
                                    <path class="st0" d="M194.8,41.8h15.6l-1.1,5.9h0.3c2-2.7,5.9-7.9,15.5-7.9l-3.1,17c-7.9,0.1-13.6,1.7-15.1,10.3l-5.7,30.7h-16.8
                                        L194.8,41.8z"></path>
                                    <polygon class="st0" points="236.4,19.9 253.2,19.9 245.3,62.1 245.6,62.1 265,41.8 284.7,41.8 259.1,66.4 273.8,97.8 254.8,97.8 
                                        244,70.8 243.7,70.8 238.8,97.8 221.9,97.8 		"></polygon>
                                    <path class="st0" d="M311.6,39.8c-17,0-32.1,14.6-34.9,30.2c-3.1,16.6,8.1,29.7,24.2,29.7c5.7,0,11.6-1.7,16.8-5.1
                                        c5.3-3.2,10.2-8,14-14.3h-17.1c-2.8,2.9-6,5.2-11.2,5.2c-6.5,0-11.4-3.9-11.1-10.6h42c0.5-1.3,0.8-2.3,1.2-4.4
                                        C338.7,53.4,328.7,39.8,311.6,39.8z M294.6,63.6c1.3-3.3,5.9-9.6,14.6-9.6c8.7,0,10.8,6.3,10.8,9.6H294.6z"></path>
                                    <polygon class="st0" points="96.5,19.9 66.9,64.3 66.7,64.3 66.7,19.9 52.4,19.9 0,97.8 20.3,97.8 49.7,53.4 50,53.4 50,97.8 
                                        64.4,97.8 93.8,53.4 94.1,53.4 94.1,97.8 110.9,97.8 110.9,19.9 		"></polygon>
                                    <path class="st0" d="M378,41.8h-10.6l3.1-16.6h-14.7l-1.2,6.4c-1.3,7.3-5.9,9.5-12,10.2h-0.1L340,54.5h8.3l-8,43.3H357l8-43.3
                                        h10.7L378,41.8z"></path>
                                </g>
                                <g>
                                    <g>
                                        <path class="st1" d="M637.2,76.6c-5.5,12.7-18.6,23.1-33.7,23.1c-17,0-27.5-13.4-24.5-30.1c3.1-16.4,18.3-29.8,35.1-29.8
                                            c14.8,0,25,9.9,25.3,23.6h-17c-1.1-3.9-3.6-7.9-10.7-7.9c-7.9-0.4-14.4,6.1-15.9,14.2c-1.5,8.2,2.7,14.3,10.7,14.3
                                            c6.9,0,11.1-4,13.5-7.5H637.2z M498.4,0l-32.6,19.9h9.2l-29.5,44.4h-0.3V19.9h-14.4l-29.5,44.4H401V19.9h-16.8v77.9h14.6
                                            l29.5-44.4h0.3v44.4h14.4l52.2-77.9h8.3L498.4,0z M530.2,97.8h-16.6l1.1-6h-0.3c-3.9,5.5-11.4,8-17.9,8
                                            c-17.8,0-25.5-14-22.6-30.1c3.3-18.3,18.7-29.9,33.7-29.9c9.2,0,13.5,4.5,15,7.9h0.3l1.2-5.9h16.6L530.2,97.8z M502,84.2
                                            c10.4,0,15.6-9,16.7-14.4c1.2-6.7-2-14.2-11.5-14.2c-9.6,0-15.4,8-16.6,14.4C489.7,75.2,491.8,84.2,502,84.2L502,84.2z
                                             M582.5,41.8H572l3.1-16.6h-14.7l-1.2,6.4c-1.3,7.3-5.9,9.5-12,10.2H547l-2.4,12.7h8.3l-8,43.3h16.7l8-43.3h10.7L582.5,41.8z
                                             M653,19.9h16.7l-5.1,27.8h0.3c3.6-5.2,8.4-7.9,15.8-7.9c5.3,0,11.4,2,14.2,6.3c3.6,5.5,3.2,10.4,1.3,20.4l-5.7,31.3h-16.7
                                            l5.6-30.5c0.5-2.7,2.1-11.8-6.8-11.8c-9.4,0-11,8.4-11.5,11.2l-5.7,31h-16.7L653,19.9z"></path>
                                    </g>
                                </g>
                            </g>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <div id="lede">
            </div>
            <div id="main">
            </div>
            <div id="sidebar">
                <img src="img/etrade.png" width="300" height="250" />
            </div>
            <div id="footer">
                <div class="footer-row">
                    
                </div>
            </div>
            <div id="mostpop">
                <h5>Most Popular</h5>
                <div id="mostpop__lineup"></div>
            </div>
            <div id="morenews">
                <div id="morenews__lineup"></div>
            </div>
        </div>
        <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
        <script>
            $(document).ready(function() {

                var mostpop_feed = 'https://api.parsely.com/v2/analytics/posts?apikey=marketwatch.com&secret=d8mbV6bMpQyZhD9asw7vvXhIg6KoCEBD4A0xMO4MYGA&period_start=15m&limit=25';
                
                $.getJSON( mostpop_feed, function( data )  {
                    
                    var items = data.data;
                    for (var i = 0; i < 10; i++){
                        $("<div>", { 'class': 'mostpop__tile','id': i}).appendTo("#mostpop__lineup");   
                        $("<div>", { 'class': 'mostpop__wrapper'}).appendTo("#"+i);
                        $("<div>", { 'class': 'mostpop__image', 'html': "<a href='"+items[i].url+"' target='_blank'><img src='"+items[i].image_url+"' width='100%' border='0' alt='"+items[i].title+"' /></a>"}).appendTo("#"+i+" .mostpop__wrapper");
                        $("<div>", { 'class': 'mostpop__hed', 'html': "<h3><a href='"+items[i].url+"' target='_blank'>"+items[i].title+"</a></h3>"}).appendTo("#"+i+" .mostpop__wrapper");
                    }
                    
                })
                .done(function(){
                    $("#loading").fadeOut("slow");
                });;

                var main_feed = 'feed/main__feed.json';
                
                $.getJSON( main_feed, function (data) {
                    
                    var items = data;
                    for (var i = 0; i < 9; i++){
                        
                        if(i === 0){
                            $("<div>", { 'class': 'lede__tile','id': "story-"+i}).appendTo("#lede");   
                            $("<div>", { 'class': 'lede__image', 'html': "<a href='"+items[i].url+"' target='_blank'><img src='"+items[i].images[5].url+"' width='100%' border='0' alt='"+items[i].headline+"' /></a>"}).appendTo("#story-"+i); 
                            $("<div>", { 'class': 'lede__hed', 'html': "<h1><a href='"+items[i].url+"' target='_blank'>"+items[i].headline+"</a></h1>"}).appendTo("#story-"+i);
                        } else if (i === 1 || i === 2){
                            
                            $("<div>", { 'class': 'main__tile','id': "story-"+i}).appendTo("#main");  
                            $("<div>", { 'class': 'main__image', 'html': "<a href='"+items[i].url+"' target='_blank'><img src='"+items[i].images[5].url+"' width='100%' border='0' alt='"+items[i].headline+"' /></a>"}).appendTo("#story-"+i); 
                            $("<div>", { 'class': 'main__hed', 'html': "<h3><a href='"+items[i].url+"' target='_blank'>"+items[i].headline+"</a></h3>"}).appendTo("#story-"+i);
                            
                        }  else if (i >=3){
                            
                           $("<div>", { 'class': 'morenews__tile','id': "story-"+i}).appendTo("#morenews__lineup");  
                            $("<div>", { 'class': 'morenews__image', 'html': "<a href='"+items[i].url+"' target='_blank'><img src='"+items[i].images[5].url+"' width='100%' border='0' alt='"+items[i].headline+"' /></a>"}).appendTo("#story-"+i); 
                            $("<div>", { 'class': 'morenews__hed', 'html': "<h4><a href='"+items[i].url+"' target='_blank'>"+items[i].headline+"</a></h4>"}).appendTo("#story-"+i);
                            
                        } 
                    }
                    
                });
                
                /*
	            //feed to parse
                var feed = "feed.xml";
                var i = 0;

                $.ajax(feed, {
                    dataType:"xml",
                    success:function(data) {
                        var j = $(data).find("item").length;
                        $(data).find("item").each(function () { // or "item" or whatever suits your feed
                            var el = $(this);
                            
                            // Check for image thumbnail 
                            var content = el.find("content\\:encoded").text();
                            var pattern = /<img[^>]+src="([^">]+)"/;
                            var img = pattern.exec(content);
                            
                            if(img){
                                i++;
                                console.log(i + " of " + j + " ------------------------");
                                console.log("title      : " + el.find("title").text());
                                console.log("link       : " + el.find("link").text());
                                console.log("description: " + el.find("description").text());
                                console.log("content: " + content);
                                console.log("thumbnail: " + img[1]);
                            }
                    
                        });


                    }	
                });
                */
                
            });
        </script>
    </body>
</html>